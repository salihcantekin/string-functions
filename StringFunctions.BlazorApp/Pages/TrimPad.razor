@page "/trim-pad"

<SeoHead Route="trim-pad" />

<PageTitle>Trim/Pad</PageTitle>

<ToolPageLayout Title="Trim/Pad" Description="Trim whitespace or add padding to your text.">
    <OptionsContent>
        <div class="option-group">
            <span class="option-label">Operation:</span>
            <FluentSelect TOption="string" @bind-Value="@operationMode" Style="min-width: 180px;" @bind-Value:after="Process">
                <FluentOption Value="trim">Trim (both ends)</FluentOption>
                <FluentOption Value="trimstart">Trim Start</FluentOption>
                <FluentOption Value="trimend">Trim End</FluentOption>
                <FluentOption Value="padleft">Pad Left</FluentOption>
                <FluentOption Value="padright">Pad Right</FluentOption>
            </FluentSelect>
        </div>
        @if (operationMode.StartsWith("pad"))
        {
            <div class="option-divider"></div>
            <div class="option-group">
                <span class="option-label">Width:</span>
                <FluentNumberField @bind-Value="@totalWidth" Min="1" Style="width: 80px;" @bind-Value:after="Process" />
            </div>
            <div class="option-group">
                <span class="option-label">Char:</span>
                <FluentTextField @bind-Value="@paddingChar" Maxlength="1" Style="width: 60px;" @bind-Value:after="Process" />
            </div>
        }
        @if (operationMode.StartsWith("trim"))
        {
            <div class="option-divider"></div>
            <div class="option-group">
                <span class="option-label">Chars to trim:</span>
                <FluentTextField @bind-Value="@trimChars" Placeholder="(whitespace)" Style="width: 100px;" @bind-Value:after="Process" />
            </div>
        }
        <div class="option-divider"></div>
        <FluentCheckbox @bind-Value="@applyToEachLine" Label="Apply to each line" @bind-Value:after="Process" />
    </OptionsContent>
    <ChildContent>
        <div class="io-grid">
            <div class="io-panel">
                <div class="io-panel-header">
                    <span class="io-panel-title">Input</span>
                </div>
                <FluentTextArea @bind-Value="@inputText" 
                               Placeholder="Enter text..."
                               Resize="TextAreaResize.Vertical"
                               @oninput="OnInputChanged" />
            </div>

            <div class="io-panel">
                <div class="io-panel-header">
                    <span class="io-panel-title">Output</span>
                    <CopyButton Text="@outputText" />
                </div>
                <FluentTextArea Value="@outputText" 
                               ReadOnly="true"
                               Resize="TextAreaResize.Vertical" />
            </div>
        </div>
    </ChildContent>
</ToolPageLayout>

<style>
    .io-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        flex: 1;
    }

    .io-panel {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .io-panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 32px;
    }

    .io-panel-title {
        font-weight: 600;
        color: var(--text-primary);
    }

    @@media (max-width: 768px) {
        .io-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }
    }
</style>

@code {
    private string inputText = string.Empty;
    private string outputText = string.Empty;
    private string operationMode = "trim";
    private int totalWidth = 20;
    private string paddingChar = " ";
    private string trimChars = string.Empty;
    private bool applyToEachLine = false;

    private void OnInputChanged(ChangeEventArgs e)
    {
        inputText = e.Value?.ToString() ?? string.Empty;
        Process();
    }

    private void Process()
    {
        if (string.IsNullOrEmpty(inputText))
        {
            outputText = string.Empty;
            return;
        }

        if (applyToEachLine)
        {
            var lines = inputText.Split('\n');
            outputText = string.Join("\n", lines.Select(ProcessLine));
        }
        else
        {
            outputText = ProcessLine(inputText);
        }
    }

    private string ProcessLine(string line)
    {
        var chars = string.IsNullOrEmpty(trimChars) ? null : trimChars.ToCharArray();
        var padChar = string.IsNullOrEmpty(paddingChar) ? ' ' : paddingChar[0];

        return operationMode switch
        {
            "trim" => chars == null ? line.Trim() : line.Trim(chars),
            "trimstart" => chars == null ? line.TrimStart() : line.TrimStart(chars),
            "trimend" => chars == null ? line.TrimEnd() : line.TrimEnd(chars),
            "padleft" => line.PadLeft(totalWidth, padChar),
            "padright" => line.PadRight(totalWidth, padChar),
            _ => line
        };
    }
}

